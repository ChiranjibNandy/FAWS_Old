<div class="rs-row">
    <div class="migr-ddi-name">{{vm.tenant_account_name}} #{{vm.tenant_id}}
        <span class="migr-ddi-name"><i class="fa fa-arrow-right fa-fw"></i>
            <div class="rs-dropdown rs-primary-dropdown">
                <a class="rs-dropdown-toggle" href="javascript:void(0);" ng-show="vm.fawsAcctStatus"> <div class="faws-name">{{vm.selectedFaws.split('(')[0]}}</div><div class="faws-account"> &nbsp;({{vm.selectedFaws.split('(')[1]}}</div> <span class="rs-status" role="button" data-trigger="hover" data-placement="top" data-toggle="popover"></span></a>
                <a class="rs-dropdown-toggle" href="javascript:void(0);" ng-show="!vm.fawsAcctStatus"> No AWS Accounts Found <span class="rs-status" role="button" data-trigger="hover" data-placement="top" data-toggle="popover"></span></a>
                <a class="rs-dropdown-toggle" href="javascript:void(0);"><i class="rs-caret"></i></a>
                <ul class="rs-dropdown-menu hidden">
                    <li class="rs-dropdown-item" ng-show="vm.showCreateAccount">
                        <span class="rs-dropdown-category">You may create a new Account for this migration:
                            <a href="" role="button" ng-click="vm.displayFawsAccounModal()" data-toggle="modal" ng-show="vm.editmigration === 'false' && vm.is_racker == true" aria-hidden="false">Assign new AWS account</a>
                            <a ng-href="{{vm.fawsLink}}" target="_blank" ng-show="vm.editmigration === 'false' && vm.is_racker == false" >Create Ticket to request new AWS Account</a>
                        </span>
                    </li>
                    <li class="rs-dropdown-item" ng-show="vm.fawsAcctStatus && vm.showCreateAccount">
                        <span class="rs-dropdown-category">or Select an Existing account:</span>
                    </li>
                    <li class="rs-dropdown-item" ng-show="vm.fawsAcctStatus && !vm.showCreateAccount">
                        <span class="rs-dropdown-category">Select another AWS account:</span>
                    </li>
                    <li class="rs-dropdown-item" ng-show="vm.fawsAcctStatus">
                        <select ng-model="vm.selectedFaws" class="ng-pristine ng-valid ng-not-empty ng-touched" aria-invalid="false" ng-change="vm.fawsAccountchanged()">
                            <!-- ngRepeat: account in vm.awsAccountsDetails -->
                            <option ng-repeat="account in vm.awsAccountsDetails" class="ng-binding ng-scope" value="{{account.name}} (#{{account.awsAccountNumber}})">{{account.name}} (#{{account.awsAccountNumber}})</option>
                            <!-- end ngRepeat: account in vm.awsAccountsDetails -->
                        </select>
                    </li>
                </ul>
            </div>
        </span>
    </div>
</div>
<div class="migr-name" ng-show="vm.editmigration === 'true'">
    <rseditbatchname></rseditbatchname>
</div>

<div id="create-faws-account-modal" class="modal modal-warning hide animated fadeIn" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-times"></i></button>
        <big>Please provide following details to Add credentials for the new FAWS Account.</big>
    </div>
    <div class="modal-body">
        <div ng-show="vm.fawsCreated">
            <big>Successfully Added Credentials!</big><br>
            <!--<br>
            <b>Account Name : </b> {{vm.newAccountDetails.name}}<br> 
            <b>Accout Number :</b> {{vm.newAccountDetails.awsAccountNumber}}<br>
            <b>Service Level :</b> {{vm.newAccountDetails.serviceLevelName}}<br><br>
            Click&nbsp;<a target="_blank" ng-href="https://manage.rackspace.com/aws/accounts">here</a>&nbsp;for more details.-->
        </div>   
       <span ng-show="vm.fawsError" style="color: #c40022">Uh oh! Something went wrong while adding credentials. Please try again after sometime...</span>
        <div ng-hide= "vm.fawsCreated || vm.fawsError">
            <form class="form-horizontal">
                <div class="form-group">
                    <label class="col-sm-2 control-label">Account Name </label>
                    <div class="col-sm-10">
                        <input type="text" ng-model="vm.fawsAcctName" class="rs-input-xlarge" placeholder="AWS Account Name" />
                    </div>
                    <label class="col-sm-2 control-label">Account ID &nbsp;&nbsp;&nbsp;&nbsp;  </label>
                    <div class="col-sm-10">
                        <input type="text" ng-model="vm.fawsAcctId" class="rs-input-xlarge" placeholder="AWS Account ID" />
                    </div>
                
                    <label class="col-sm-2 control-label">Access Key &nbsp;&nbsp;&nbsp;  </label>
                    <div class="col-sm-10">
                        <input type="text" ng-model="vm.fawsAccessKey" class="rs-input-xlarge" placeholder="AWS Access Key" />
                    </div>
                
                    <label class="col-sm-2 control-label">Secret Key &nbsp;&nbsp;&nbsp;&nbsp;  </label>
                    <div class="col-sm-10">
                        <input type="text" ng-model="vm.fawsSecretKey" class="rs-input-xlarge" placeholder="AWS Secret Key" />
                    </div>
                </div>
            </form>
        </div>    
    </div>
    <div class="modal-footer">
       
        <a class="rs-btn rs-btn-primary" ng-disabled="!vm.fawsAcctName || !vm.fawsAccessKey || !vm.fawsSecretKey || !vm.fawsAcctId" ng-click="vm.createFawsAccount()" ng-hide="vm.fawsError || vm.fawsCreationProgress || vm.fawsCreated">Submit</a>
        <a class="rs-btn disabled" disabled="disabled" ng-show="vm.fawsCreationProgress">Submitting...</a>
        <a class="rs-btn" data-dismiss="modal" aria-hidden="true">Close</a>
    </div>
</div>


<script type="text/javascript">
    $(document).ready(function () {
        $('[data-toggle="popover"]').popover({
            html: true
        });
    });
    $(document).ready(function () {
        $('.rs-dropdown').each(function (i, element) {
            var menu = new canon.Menu();
            menu.attach(element);
        });
    });
</script>