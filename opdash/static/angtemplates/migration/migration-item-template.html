
<div class="rs-main">
  <div class="rs-sidebar">
    <div class="rs-facet-header">
        <div class="rs-facet-clear-link rs-hidden">clear all</div>
        <div class="rs-facet-title">Filter {{vm.type}}s</div>
    </div>
    <div class="rs-facet-section">
        <div class="rs-facet-section-header">
        <div class="rs-facet-clear-link rs-hidden">clear</div>
        <div class="rs-facet-section-title">Migration Status</div>
        </div>
        <div class="rs-facet-section-body">
            <ul class="rs-facet-list">
                <li class="rs-facet-item" ng-repeat="statusFilterItem in vm.statusFilters" 
                                        ng-class="{'selected': statusFilterItem.selected}"
                                        ng-click="vm.setStatusFilter(statusFilterItem.type)">
                    <i ng-class="{'rs-status-ok': statusFilterItem.type==='completed', 'rs-status-warning': statusFilterItem.type==='inProgress', 'rs-status-error': statusFilterItem.type==='error', 'rs-status-disabled': statusFilterItem.type==='disabled'}"></i>
                    <div class="rs-facet-label">{{statusFilterItem.text}}</div>
                    <div class="rs-facet-count">({{statusFilterItem.text === "All" ? vm.items.length : vm.getCountByStatus(statusFilterItem.type)}})</div>
                </li>
            </ul>
        </div>
    </div>
  </div>
  <div class="rs-content rs-panel">
    <div class="rs-row">
        <div class="migration-item-header">
            <h2 class="rs-page-title migration-item-type span-5">{{vm.type}}s</h2>
            <span class="span-1 no-break">Search by:</span>
            <select class="span-3" ng-model="vm.searchField" 
                    ng-change="vm.clearSearch()" 
                    ng-options="label.field as label.text for label in vm.labels">
           </select>
            <input type="text" class="rs-input-large span-3" 
                    ng-model="vm.search[vm.searchField]" 
                    placeholder="Search {{vm.type}}s">
        </div>
    </div>
    <div class="rs-embedded-list-table-wrapper rs-embedded-medium">
        <table class="rs-list-table rs-embedded-list-table">
            <thead>
                <tr>
                    <th class="rs-table-status"></th>
                    <th>
                        <a class="rs-table-sort rs-table-sort-desc">
                            <span class="rs-table-sort-text">{{vm.labels[0].text}}</span>
                            <span class="rs-table-sort-indicator" ng-click="vm.sort(vm.labels[0].field)"></span>
                        </a>
                    </th>
                    <th>
                        <a class="rs-table-sort rs-table-sort-desc">
                            <span class="rs-table-sort-text">{{vm.labels[1].text}}</span>
                            <span class="rs-table-sort-indicator" ng-click="vm.sort(vm.labels[1].field)"></span>
                        </a>
                    </th>
                    <th>
                        <a class="rs-table-sort rs-table-sort-desc">
                            <span class="rs-table-sort-text">{{vm.labels[2].text}}</span>
                            <span class="rs-table-sort-indicator" ng-click="vm.sort(vm.labels[2].field)"></span>
                        </a>
                    </th>
                    <th>
                        <a class="rs-table-sort rs-table-sort-desc">
                            <span class="rs-table-sort-text">{{vm.labels[3].text}}</span>
                            <span class="rs-table-sort-indicator" ng-click="vm.sort(vm.labels[3].field)"></span>
                        </a>
                    </th>
                    <th>
                        <a class="rs-table-sort rs-table-sort-desc">
                            <span class="rs-table-sort-text">{{vm.labels[4].text}}</span>
                            <span class="rs-table-sort-indicator" ng-click="vm.sort(vm.labels[4].field)"></span>
                        </a>
                    </th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="item in vm.items | filter: vm.statusFilter | filter: vm.search">
                    <td class="rs-table-status" ng-class="{'rs-table-status-ok': item.migrationStatus=='completed', 'rs-table-status-processing rs-table-status-striped': item.migrationStatus=='inProgress', 'rs-table-status-error': item.migrationStatus=='error', 'rs-table-status-disabled': item.migrationStatus=='disabled'}"></td>
                    <td class="rs-table-link"><a href="#" ng-link="['EquipmentDetails', {type: vm.type, id: item.id}]">{{item.name}}</a></td>
                    <td class="rs-table-link">{{item.region}}</td>
                    <td class="rs-table-link">{{item.tenant_id}}</td>
                    <td class="rs-table-text">{{item.ip_address}}</td>
                    <td class="rs-table-text">
                        <div class="rs-progress" ng-show="item.migrationStatus == 'inProgress'" title="Progress: {{item.progress}}%">
                            <div class="rs-progress-inner">
                                <div class="rs-segment" style="width: {{item.progress}}%">
                                    <div class="rs-bar rs-status-ok"></div>
                                </div>
                            </div>
                        </div>
                        <div ng-show="item.migrationStatus == 'completed'">
                            <a ng-click="vm.storeStatus(item.migrationStatus,item.name)">view log</a>
                        </div>
                        <div ng-show="item.migrationStatus == 'error'">
                            <a ng-click="vm.storeStatus(item.migrationStatus,item.name)">view log</a>
                        </div>
                    </td>
                    <td>
                        <button class="rs-btn rs-btn-primary" ng-click="vm.migrate(vm.type, item.id)">Migrate</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
  </div>
</div>