<script>
    $('input.name-input[type="text"]').blur(function() {  
        if ($.trim(this.value) == ''){  
            this.value = (this.defaultValue ? this.defaultValue : '');  
        }
        else{
            $(this).prev().prev().html(this.value);
        }       
        $(this).hide();
        $(this).prev().show();
        $(this).prev().prev().show();
    });      
    $('input.name-input[type="text"]').keypress(function(event) {
        if (event.keyCode == '13') {
            if ($.trim(this.value) == ''){  
                this.value = (this.defaultValue ? this.defaultValue : '');  
            }
            else
            {
                $(this).prev().prev().html(this.value);
            }           
            $(this).hide();
            $(this).prev().show();
            $(this).prev().prev().show();
        }
    });   
</script>
<div class="rs-container migration-mgr">
    <div class="rs-main rs-panel">
        <div class="rs-content rs-panel">
            <rsinteractiveheader pagenum="3"></rsinteractiveheader>
            <hr>
            <div class="rs-inner">
                <h2>{{vm.tenant_account_name}} ( #{{vm.tenant_id}} )</h2>
                <div class="migr-name">
                    <div ng-show="!vm.editorEnabled">
                        <h3>{{vm.batchName}}</h3>
                        <span class="edit rs-edit" ng-click="vm.editorEnabled = true; vm.tempBatchName = vm.batchName"></span>
                    </div>
                    <div ng-show="vm.editorEnabled">
                        <input ng-model="vm.tempBatchName" class="name-input animated flipInX"/>
                        <span class="fontSize">  
                            <i class="fa fa-check" ng-click="vm.save()"></i>    
                        </span>
                        <span class="fontSize">
                            <i class="fa fa-close" ng-click="vm.disableEditor()"></i>
                        </span>
                    </div>
                    <!--<div ng-show="vm.editorEnabled">
                        <input type="text" ng-model="vm.tempBatchName" class="name-input animated flipInX" style="display: inline-block;"/>
                        <a href="javascript:void(0);" ng-click="vm.save()">Save</a>
                        or
                        <a href="javascript:void(0);" ng-click="vm.disableEditor()">Cancel</a>
                    </div>-->
                </div>
                <div class="clear"></div>
                <div class="rs-row">
                    <div class="span-6">
                        <rsselecteditemspanel showrec="true"></rsselecteditemspanel>
                    </div>
                    <div class="span-3">
                        <div class="plain-panel rs-center">
                            <h3>Scheduled Summary <a ng-link="['ScheduleMigration']" class="rs-edit" title="Go to step 3 to choose new Schedule"></a></h3>
                            <hr>
                            <div class="schedule-tile">
                                <p>Date: {{vm.schedule.date}}</p>
                                <p>Time: {{vm.schedule.time}}</p>
                                <p>Timezone: {{vm.schedule.timezone}}</p>
                            </div>
                        </div>
                    </div>
                    <div class="span-3">
                        <div class="plain-panel rs-center">
                            <h3>Projected Cost 
                                <!--<a href=""><i id="tooltip-demo" class="rs-icon-help" title="click to see more details about pricing."></i></a>-->
                            </h3>
                            <hr>
                            <h3><b>{{vm.cost | currency: '$'}} / month</b> </h3>
                            <small>Current Support Level: <b><a href="https://www.rackspace.com/en-us/managed-aws/features" target="_blank">Navigator</a></b></small>
                        </div>
                    </div>
                </div>
                <br>
                <div class="rs-row">
                    <div class="rs-pull-right">
                        <a class="rs-btn " ng-link="['ScheduleMigration']">Back</a>
                        <a class="rs-btn" ng-click="vm.saveItems(vm.saveLaterObj)" ng-hide="vm.saveLaterObj.saveInProgress">Save For Later</a>
                        <a class="rs-btn disabled" disabled="disabled" ng-show="vm.saveLaterObj.saveInProgress">Saving...</a>
                        <i class="rs-processing-indicator" ng-show="vm.saveLaterObj.saveInProgress"></i>
                        <a class="rs-btn" role="button" ng-click="vm.showCancelDialog()">Cancel Migration</a>
                        <a class="rs-btn rs-btn-primary " ng-click="vm.migrate()" ng-show="!vm.migrating" ng-class="{'disabled': vm.errorInMigration}">Confirm Migration</a>
                        <a class="rs-btn rs-btn-primary disabled" ng-show="vm.migrating">Processing...</a>
                    </div>
                </div>
                <div style="color: red; text-align: right;" ng-show="vm.errorInMigration">Error while trying to migrate</div>
                <div class="rs-row" style="text-align: right;" ng-show="vm.saveLaterObj.resultMsg" ng-style="vm.saveLaterObj.saveSuccess == true ? {color:'green'} : {color:'red'}" >{{vm.saveLaterObj.resultMsg}}</div>
                <br>
            </div>
        </div>
    </div>
    <rsinteractivefooter></rsinteractivefooter>
</div>

<!-- modals -->
<div id="cancel_modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="ModalForCancel" aria-hidden="true">
        <div class="modal-body">
            <h3>Would you like to save the selections you've made so far for another time?</h3>
            <form class=" ">
                <div class="rs-control-group">
                    <div class="rs-controls">
                      <label class="rs-radio">
                        <input type="radio" ng-model="vm.saveProgress" value="yes">
                        <strong>Yes</strong><br>
                        <span class="rs-help-block">Save progress for later</span>
                      </label>
                      <label class="rs-radio">
                        <input type="radio" ng-model="vm.saveProgress" value="no">
                        <strong>No</strong>
                        <span class="rs-help-block">Cancel and move on</span>
                      </label>
                    </div>
                  </div>
                    <button class="rs-btn" data-dismiss="modal" aria-hidden="true">Close</button>
                    <button class="rs-btn rs-btn-primary " ng-class="{disabled:vm.saveProgress == ''}" ng-click="vm.submitCancel()" ng-hide="vm.cancelnSaveObj.saveInProgress">Submit</button>
                    <a class="rs-btn disabled" disabled="disabled" ng-show="vm.cancelnSaveObj.saveInProgress">Submitting...</a>
                    <i class="rs-processing-indicator" ng-show="vm.cancelnSaveObj.saveInProgress"></i>
                    <br>
                    <div ng-show="vm.cancelnSaveObj.resultMsg" ng-style="vm.cancelnSaveObj.saveSuccess == true ? {color:'green'} : {color:'red'}" >{{vm.cancelnSaveObj.resultMsg}}</div>
            </form>
        </div>
    </div>
<!-- end modals -->