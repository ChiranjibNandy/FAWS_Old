<br>
<div class="rs-container migrationdashBoard-mgr migration-mgr " ng-style="vm.isRacker == true ? {'margin-top':'30px'} : {'margin-top':'0px'}">
    <div class="alert alert-success animated fadeIn" ng-if="vm.afterNewMigration">
        <button type="button" class="close" data-dismiss="alert"><i class="fa fa-times"></i></button>
        <h3>Success! Migration for {{vm.resourceCount}} resources confirmed for {{vm.schedule.date}} at {{vm.schedule.time}}</h3>
    </div>
    <div class="alert alert-success animated fadeIn" ng-if="vm.migrationName && vm.afterSavedMigration">
        <button type="button" class="close" data-dismiss="alert"><i class="fa fa-times" ng-click="vm.resetSavedMigrationFlag()"></i></button>
        <h3>Your Migration was saved successfully with the name {{vm.migrationName}}</h3>
    </div>
</div>
    <div class="rs-main rs-panel">
        <div class="rs-content rs-panel">
            <div class="rs-inner">
                <div class="rs-row">
                    <div class="span-8">
                        <div class="migr-ddi-name">
                            {{vm.currentUser}} ( #{{vm.tenant_id}} )
                        </div>
                        <h3>Welcome to your Migration Dashboard, you have <b><em>{{vm.getTotalBatches()}} {{ vm.getTotalBatches() == 1 ? 'batch' : 'batches' }}</em></b>.</h3>
                    </div>
                    <div class="span-4 ">
                        <div class="pull-right">
                            <button class="rs-btn" ng-click="vm.getBatches(true)">
                                <i class="fa fa-refresh" ng-class="{'fa-spin': vm.loading || vm.manualRefresh}"></i> Refresh
                            </button>
                            <button class="rs-btn rs-btn-primary" ng-click="vm.startNewMigration()"><i class="fa fa-plus-square fa-fw"></i> Start New Migration</button>
                            <div style="margin-top: 10px;" ng-show="!vm.loading && !vm.manualRefresh && !vm.loadError">Last refreshed: {{vm.timeSinceLastRefresh===0 ? " just now" : vm.timeSinceLastRefresh + (vm.timeSinceLastRefresh>1 ? " mins ": " min ") + "ago"}}</div>
                        </div>
                    </div>
                </div>
                
                <!--headers for current batches grid-->
                <div class="migration-status-list-container table-justify">
                    <table class="rs-list-table no-truncate-td cell-center">
                        <thead>
                            <tr>
                                <th class="rs-table-status"></th>
                                <th>
                                    <a href="javascript:void(0);" class="rs-table-sort custom-sort-a" ng-click="vm.setSortBy('current_batch', 'batch_name')" ng-class="{'custom-table-sort-asc current-sort-param': vm.sortBy['current_batch']==='batch_name', 'custom-table-sort-desc current-sort-param': vm.sortBy['current_batch']==='-batch_name', 'custom-table-sort-desc': vm.sortBy['current_batch'].indexOf('batch_name') < 0}">
                                        <span class="rs-table-sort-text">Batch Queue</span>
                                        <span class="rs-table-sort-indicator"></span>
                                    </a>
                                </th>
                                <th>
                                    <a href="javascript:void(0);" class="rs-table-sort custom-sort-a" ng-click="vm.setSortBy('current_batch', 'metadata.initiated_by')" ng-class="{'custom-table-sort-asc current-sort-param': vm.sortBy['current_batch']==='metadata.initiated_by', 'custom-table-sort-desc current-sort-param': vm.sortBy['current_batch']==='-metadata.initiated_by', 'custom-table-sort-desc': vm.sortBy['current_batch'].indexOf('metadata.initiated_by') < 0}">
                                        <span class="rs-table-sort-text">Batch Initiated by</span>
                                        <span class="rs-table-sort-indicator"></span>
                                    </a>
                                </th>
                                <th>
                                    <a href="javascript:void(0);" class="rs-table-sort custom-sort-a" ng-click="vm.setSortBy('current_batch', 'start')" ng-class="{'custom-table-sort-asc current-sort-param': vm.sortBy['current_batch']==='start', 'custom-table-sort-desc current-sort-param': vm.sortBy['current_batch']==='-start', 'custom-table-sort-desc': vm.sortBy['current_batch'].indexOf('start') < 0}">
                                        <span class="rs-table-sort-text">Start Date/Time</span>
                                        <span class="rs-table-sort-indicator"></span>
                                    </a>
                                </th>
                                <th>
                                    <a href="javascript:void(0);" class="rs-table-sort custom-sort-a" ng-click="vm.setSortBy('current_batch', 'batch_status')" ng-class="{'custom-table-sort-asc current-sort-param': vm.sortBy['current_batch']==='batch_status', 'custom-table-sort-desc current-sort-param': vm.sortBy['current_batch']==='-batch_status', 'custom-table-sort-desc': vm.sortBy['current_batch'].indexOf('batch_status') < 0}">
                                        <span class="rs-table-sort-text">Status</span>
                                        <span class="rs-table-sort-indicator"></span>
                                    </a>
                                </th>
                                <th>
                                    <a href="javascript:void(0);" class="rs-table-sort custom-sort-a">
                                        <span class="rs-table-sort-text">Progress</span>
                                    </a>
                                </th>
                                <th class="rs-table-cog rs-center">Actions</th>
                            </tr>
                        </thead>
                        <!--temporary display of recently initiated migration-->
                        <tbody ng-show="!vm.loading && !vm.currentBatches.loadError && vm.showInitiatedMigration">
                            <tr>
                                <td class="rs-table-status tip rs-table-status-ok"></td>
                                <td class="rs-table-link">
                                    <a ng-show="!batch.timestamp" ng-link="['CurrentBatchDetails', {job_id: vm.initiatedMigration.job_id}]" class="dashBoard"  >{{vm.initiatedMigration.name}}</a>
                                </td>
                                <td>{{vm.tempBatchInitiatedBy}}</td>
                                <td class="rs-table-text ng-binding">
                                    <span ng-show="!batch.timestamp">{{(vm.initiatedMigration.timestamp) | date : 'M/dd/yyyy hh:mm a'}}</span>
                                </td>
                                <td class="rs-table-text">
                                    <span class="rs-status-ok">Queued</span>                                    
                                </td>
                                <td class="rs-table-input rs-center">
                                    <div class="rs-btn-group">
                                        <div class="rs-dropdown">
                                            <div class="rs-cog rs-dropdown-toggle" ng-click="vm.showQueuedBatchMenu = true;"></div>
                                            <ul class="rs-dropdown-menu visible" ng-show="vm.showQueuedBatchMenu" style="right: 0 !important">
                                                <li class="disabled"><a href="">Modify Migration (NA)</a></li>
                                                <li class="disabled"><a href="">Cancel Migration (NA)</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                        <!--display data for current batches in grid-->
                        <tbody ng-show="!vm.loading && !vm.currentBatches.loadError && vm.currentBatches.items.length!==0">
                            <tr ng-repeat="batch in vm.currentBatches.items | orderBy: vm.sortBy.current_batch | limitTo : vm.currentBatches.pageSize : (vm.currentBatches.currentPage-1)*vm.currentBatches.pageSize" class="ng-scope">
                                <td class="rs-table-status rs-table-status-error" ng-if="batch.batch_status==='error'"></td>
                                <td class="rs-table-status" ng-if="batch.batch_status!=='error'" ng-class="{'rs-table-status-error': batch.batch_status==='error','rs-table-status-pending': (batch.batch_status==='not available' || batch.timestamp), 'rs-table-status-warning': ((batch.batch_status==='scheduled'||'paused') && batch.batch_status!=='in progress'), 'rs-table-status-ok rs-table-status-striped': batch.batch_status==='in progress' , 'rs-table-status-error': batch.batch_status==='canceled'}"></td>
                                <td class="rs-table-link">
                                    <a ng-show="!batch.timestamp" ng-link="['CurrentBatchDetails', {job_id: batch.job_id}]">{{batch.metadata.batch_name}}</a>
                                    <a ng-show="batch.timestamp" href="javascript:void(0)" ng-click="vm.continueScheduling(batch);">{{batch.batch_name}}</a>
                                </td>
                                <td ng-if="!batch.timestamp">{{batch.metadata.initiated_by}}</td>
                                <td ng-if="batch.timestamp">{{batch.initiated_by}}</td>
                                <td class="rs-table-text ng-binding">
                                    <span ng-show="!batch.timestamp">{{(batch.start)| date : 'M/dd/yyyy hh:mm a' }}</span>
                                     <span ng-show="batch.timestamp">{{(batch.timestamp)}}</span>
                                </td>
                                <td class="rs-table-text" ng-show="batch.showRefreshForApiLoading">
                                    <i class="fa fa-refresh fa-spin"></i> 
                                </td>
                                <td class="rs-table-text" ng-show="!batch.showRefreshForApiLoading">
                                    <span class="rs-status-disabled" ng-show="batch.timestamp">Not Scheduled</span>
                                    <span class="rs-status-disabled" ng-show="batch.batch_status==='not available'">Not Available</span>
                                    <span class="rs-status-warning" ng-show="batch.batch_status==='scheduled'">Scheduled</span>
                                    <span class="rs-progress-label rs-status-ok" ng-show="batch.batch_status==='in progress' && batch.progressFlag !== 'NA'">In Progress</span>                                    
                                    <span class="rs-status-ok" ng-show="batch.batch_status==='started'">Started</span>
                                    <span class="rs-status-ok" ng-show="batch.batch_status==='done'">Completed</span>
                                    <span class="rs-status-error" ng-show="batch.batch_status==='error'">Error</span>
                                    <span class="rs-status-warning" ng-show="batch.batch_status==='paused'">Paused</span>
                                </td>
                                <td class="rs-table-text" ng-class="{'paddingLeft':batch.batch_status!=='in progress'}">
                                    <div class="rs-progress rs-progress-small" ng-if="batch.batch_status==='in progress' && batch.progressFlag !== 'NA'">
                                        <div class="rs-progress-inner">
                                            <div class="rs-segment" ng-style="{'width': +batch.succeeded_time_pct +'%'}">
                                                <div class="rs-bar rs-status-ok rs-bar-striped"></div>
                                            </div>
                                        </div>
                                    </div><span class="rs-status-ok" ng-if="batch.batch_status==='in progress' && batch.progressFlag !== 'NA'"><em>  {{batch.succeeded_time_pct}}%</em></span>
                                    <span ng-if="batch.batch_status === 'paused'"><i class="fa fa-pause" aria-hidden="true"></i></span>
                                    <span ng-if="batch.batch_status === 'scheduled'"><i class="fa fa-clock-o font-size-progress-icons" aria-hidden="true"></i></span>
                                    <span ng-if="batch.batch_status === 'error'"><i class="fa fa-times font-size-progress-icons" aria-hidden="true"></i></span>
                                    <span ng-if="batch.timestamp"><i class="fa fa-ban font-size-progress-icons" aria-hidden="true"></i></span>
                                </td>
                                <!--cog button menu items-->
                                <td class="rs-table-input rs-center">
                                    <div class="rs-btn-group">
                                        <div class="rs-dropdown">
                                            <div class="rs-cog rs-dropdown-toggle" ng-click="vm.showActionList(batch)" ng-disabled="batch.batch_status==='canceled'" ></div>
                                            <ul class="rs-dropdown-menu visible" ng-show="batch.showSettings" style="right: 0 !important">
                                                <li><span class="rs-dropdown-category" ng-hide="batch.batch_status==='canceled'">Manage</span></li>
                                                <li ng-show="batch.timestamp"><a href="javascript:void(0)" ng-click="vm.continueScheduling(batch)">Continue Scheduling</a></li>
                                                <li ng-show="batch.timestamp && !batch.deleting">
                                                    <a ng-show="!batch.deleting" href="javascript:void(0)" ng-click="vm.deleteSavedSchedule(batch)">Delete</a>
                                                </li>
                                                <li ng-show="batch.batch_status==='scheduled'">
                                                    <a href="javascript:void(0)" ng-click="vm.pauseAndCancelMigration(batch,'pause')">Pause Migration</a>
                                                </li>
                                                <li ng-show="batch.batch_status==='paused'">
                                                    <a href="javascript:void(0)" ng-click="vm.pauseAndCancelMigration(batch,'unpause')">Unpause Migration</a>
                                                </li>
                                                <li class="disabled" ng-show="batch.deleting"><a href="">Deleting...</a></li>
                                                <li ng-show="batch.batch_status==='paused'">
                                                    <a href="javascript:void(0)" ng-click="vm.continueScheduling(batch,true)">Modify Migration</a>
                                                </li>
                                                <li ng-show="(batch.batch_status==='scheduled' || 'paused') && !batch.timestamp">
                                                    <a href="javascript:void(0)" ng-hide="batch.batch_status==='canceled'" ng-click="vm.pauseAndCancelMigration(batch,'cancel')">Cancel Migration</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                        <tbody ng-show="vm.loading">
                            <tr>
                                <td colspan="6">
                                    <div class="rs-table-overlay rs-table-overlay-loading">
                                        <div class="rs-table-overlay-content">
                                            <div class="rs-table-overlay-message">Loading&hellip;</div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                        <tbody ng-show="!vm.loading && !vm.currentBatches.loadError && vm.currentBatches.items.length===0 && !vm.showInitiatedMigration">
                            <tr>
                                <td colspan="6" class="empty-collection-info">You don't have any migrations running at the moment.</td>
                            </tr>
                        </tbody>
                        <tbody ng-show="!vm.loading && vm.currentBatches.loadError">
                            <tr>
                                <td colspan="6" class="collection-error-msg">Error loading data</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <br>
                <!--pagination for current batches grid-->
                <div class="pagination pagination-mini" ng-show="!vm.loading && vm.currentBatches.items.length!==0">
                    <ul>
                        <li><span>Showing {{(vm.currentBatches.currentPage == 1 ? vm.currentBatches.currentPage : ((vm.currentBatches.currentPage-1)*5)+1)}}-{{(vm.currentBatches.currentPage == vm.currentBatches.noOfPages ? vm.currentBatches.items.length : vm.currentBatches.currentPage*5)}} of {{vm.currentBatches.items.length}}</span></li>
                        <li ng-class="{disabled: vm.currentBatches.currentPage == 1}" ng-click="vm.currentBatches.currentPage=vm.currentBatches.currentPage-1"><a href="">Prev</a></li>
                        <li ng-repeat="n in vm.currentBatches.pages track by $index" ng-click="vm.currentBatches.currentPage = $index+1" ><a ng-class ="{current: vm.currentBatches.currentPage == $index+1}" ng-style="{'background-color': vm.currentBatches.currentPage == $index+1 ? '#D3D3D3' : 'white'}" href="">{{$index+1}}</a></li>
                        <li ng-class="{disabled: vm.currentBatches.currentPage == vm.currentBatches.noOfPages}" ng-click="vm.currentBatches.currentPage=vm.currentBatches.currentPage+1"><a href="">Next</a></li>
                    </ul>
                </div>  

                <!--header for Completed batches-->
                <div class="migration-status-list-container table-justify">
                    <table class="rs-list-table secondary-table">
                        <thead>
                            <tr>
                                <th class="rs-table-status"></th>
                                <th>
                                    <a href="javascript:void(0);" class="rs-table-sort custom-sort-a" ng-click="vm.setSortBy('completed_batch', 'metadata.batch_name')" ng-class="{'custom-table-sort-asc current-sort-param': vm.sortBy['completed_batch']==='metadata.batch_name', 'custom-table-sort-desc current-sort-param': vm.sortBy['completed_batch']==='-metadata.batch_name', 'custom-table-sort-desc': vm.sortBy['completed_batch'].indexOf('metadata.batch_name') < 0}">
                                        <span class="rs-table-sort-text">Completed/Cancelled Batches</span>
                                        <span class="rs-table-sort-indicator"></span>
                                    </a>
                                </th>
                                <th><a href="javascript:void(0);" class="rs-table-sort custom-sort-a" ng-click="vm.setSortBy('completed_batch', 'metadata.initiated_by')" ng-class="{'custom-table-sort-asc current-sort-param': vm.sortBy['completed_batch']==='metadata.initiated_by', 'custom-table-sort-desc current-sort-param': vm.sortBy['completed_batch']==='-metadata.initiated_by', 'custom-table-sort-desc': vm.sortBy['completed_batch'].indexOf('metadata.initiated_by') < 0}">
                                        <span class="rs-table-sort-text">Batch Initiated by </span>
                                      <span class="rs-table-sort-indicator"></span>
                                    </a>
                                </th>
                                <th>
                                    <a href="javascript:void(0);" class="rs-table-sort custom-sort-a" ng-click="vm.setSortBy('completed_batch', 'start')" ng-class="{'custom-table-sort-asc current-sort-param': vm.sortBy['completed_batch']==='start', 'custom-table-sort-desc current-sort-param': vm.sortBy['completed_batch']==='-start', 'custom-table-sort-desc': vm.sortBy['completed_batch'].indexOf('start') < 0}">
                                        <span class="rs-table-sort-text">Start Date/Time</span>
                                        <span class="rs-table-sort-indicator"></span>
                                    </a>
                                </th>
                                <th>
                                    <a href="javascript:void(0);" class="rs-table-sort custom-sort-a" ng-click="vm.setSortBy('completed_batch', 'end')" ng-class="{'custom-table-sort-asc current-sort-param': vm.sortBy['completed_batch']==='end', 'custom-table-sort-desc current-sort-param': vm.sortBy['completed_batch']==='-end', 'custom-table-sort-desc': vm.sortBy['completed_batch'].indexOf('end') < 0}">
                                        <span class="rs-table-sort-text">Completed Date/Time</span>
                                        <span class="rs-table-sort-indicator"></span>
                                    </a>
                                </th>
                                <th>
                                    <a href="javascript:void(0);" class="rs-table-sort custom-sort-a"  ng-click="vm.setSortBy('completed_batch', 'batch_status')" ng-class="{'custom-table-sort-asc current-sort-param': vm.sortBy['completed_batch']==='batch_status', 'custom-table-sort-desc current-sort-param': vm.sortBy['completed_batch']==='-batch_status', 'custom-table-sort-desc': vm.sortBy['completed_batch'].indexOf('batch_status') < 0}">
                                        <span class="rs-table-sort-text">Status</span>
                                        <span class="rs-table-sort-indicator"></span>
                                    </a>
                                </th>
                            </tr>
                        </thead>
                        <!--data display for completed batches grid-->
                        <tbody ng-show="!vm.loading && !vm.completedBatches.loadError && vm.completedBatches.items.length!==0">
                            <tr ng-repeat="batch in vm.completedBatches.items | orderBy: vm.sortBy.completed_batch | limitTo : vm.completedBatches.pageSize : (vm.completedBatches.currentPage-1)*vm.completedBatches.pageSize" class="ng-scope">
                                <td class="rs-table-status tip" ng-class="{'rs-table-status-warning': batch.batch_status==='canceled','rs-table-status-ok':batch.batch_status!='error'}"></td>
                                <td class="rs-table-link large-col"><a ng-link="['CurrentBatchDetails', {job_id: batch.job_id}]" class="ng-binding">{{batch.metadata.batch_name}}</a></td>
                                <td>{{batch.metadata.initiated_by}}</td>
                                <td class="rs-table-text ng-binding">{{(batch.start)| date : 'M/dd/yyyy hh:mm a'}}</td>
                                <td class="rs-table-text ng-binding">{{batch.batch_status === 'canceled' ? 'N/A' : (batch.completed_at) | date : 'M/dd/yyyy hh:mm a'}}</td>
                                <td ng-class="{'rs-status-warning': batch.batch_status==='canceled','rs-status-ok':batch.batch_status!='error'}" class="rs-table-text ng-binding capitalize" >{{batch.batch_status === 'canceled' ? 'Cancelled' : batch.batch_status}}</td>
                            </tr>
                        </tbody>
                        <tbody ng-show="vm.loading">
                            <tr>
                                <td colspan="5">
                                    <div class="rs-table-overlay rs-table-overlay-loading">
                                        <div class="rs-table-overlay-content">
                                            <div class="rs-table-overlay-message">Loading&hellip;</div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                        <tbody ng-show="!vm.loading && !vm.completedBatches.loadError && vm.completedBatches.items.length===0">
                            <tr>
                                <td colspan="5" class="empty-collection-info">You don't have any completed migrations.</td>
                            </tr>
                        </tbody>
                        <tbody ng-show="!vm.loading && vm.completedBatches.loadError">
                            <tr>
                                <td colspan="5" class="collection-error-msg">Error loading data</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <br><br>
                <!--pagination for completed bacthes-->
                <div class="pagination pagination-mini" ng-show="!vm.loading && vm.completedBatches.items.length!==0">
                    <ul>
                        <li><span>Showing {{(vm.completedBatches.currentPage == 1 ? vm.completedBatches.currentPage : ((vm.completedBatches.currentPage-1)*5)+1)}}-{{(vm.completedBatches.currentPage == vm.completedBatches.noOfPages ? vm.completedBatches.items.length : vm.completedBatches.currentPage*5)}} of {{vm.completedBatches.items.length}}</span></li>
                        <li ng-class="{disabled: vm.completedBatches.currentPage == 1}" ng-click="vm.completedBatches.currentPage=vm.completedBatches.currentPage-1"><a href="">Prev</a></li>
                        <li ng-repeat="n in vm.completedBatches.pages track by $index" ng-click="vm.completedBatches.currentPage = $index+1"><a ng-class ="{current: vm.completedBatches.currentPage == $index+1}" ng-style="{'background-color': vm.completedBatches.currentPage == $index+1 ? '#D3D3D3' : 'white'}"href="">{{$index+1}}</a></li>
                        <li ng-class="{disabled: vm.completedBatches.currentPage == vm.completedBatches.noOfPages}" ng-click="vm.completedBatches.currentPage=vm.completedBatches.currentPage+1"><a href="">Next</a></li>
                    </ul>
                </div> 

                <!--headers for Errors/alerts grid-->
                <div class="rs-row">
                    <div class="span-6">
                        <div class="rs-facet-section">
                            <div class="rs-facet-section-body">
                                <h3>Errors/Warnings <span class="rs-quiet">({{vm.errors.items.length}})</span></h3>
                                <div class="migration-status-list-container table-justify">
                                    <table class="rs-list-table no-truncate-td cell-center">
                                        <thead>
                                            <tr>
                                                <th class="rs-table-status"></th>
                                                <th>
                                                    <a href="javascript:void(0);" class="rs-table-sort custom-sort-a" ng-click="vm.setSortBy('error_batch', 'batch_name')" ng-class="{'custom-table-sort-asc current-sort-param': vm.sortBy['error_batch']==='batch_name', 'custom-table-sort-desc current-sort-param': vm.sortBy['error_batch']==='-batch_name', 'custom-table-sort-desc': vm.sortBy['error_batch'].indexOf('batch_name') < 0}">
                                                        <span class="rs-table-sort-text">Batch Name</span>
                                                        <span class="rs-table-sort-indicator"></span>
                                                    </a>
                                                </th>
                                                <th>
                                                    <a href="javascript:void(0);" class="rs-table-sort custom-sort-a" ng-click="vm.setSortBy('error_batch', 'timestamp')" ng-class="{'custom-table-sort-asc current-sort-param': vm.sortBy['error_batch']==='timestamp', 'custom-table-sort-desc current-sort-param': vm.sortBy['error_batch']==='-timestamp', 'custom-table-sort-desc': vm.sortBy['error_batch'].indexOf('timestamp') < 0}">
                                                        <span class="rs-table-sort-text">Date</span>
                                                        <span class="rs-table-sort-indicator"></span>
                                                    </a>
                                                </th>
                                                <th>Message</th>
                                            </tr>
                                        </thead>
                                        <!--data display for Errors/Alerts grid-->
                                        <tbody ng-show="!vm.loadingAlerts && vm.errors.items.length>0">
                                            <tr ng-repeat="alert in vm.errors.items | orderBy: vm.sortBy.error_batch | limitTo : vm.errors.pageSize : (vm.errors.currentPage-1)*vm.errors.pageSize">
                                                <td class="rs-table-status tip" ng-class="{ 'rs-table-status-warning': alert.type==='warning', 'rs-table-status-error': alert.type==='error'}"></td>
                                                <td><a ng-link="['CurrentBatchDetails', {job_id: alert.job_id}]">{{alert.batch_name}}</a></td>
                                                <td class="rs-table-text ng-binding">{{alert.timestamp | date : 'M/dd/yyyy'}}</td>
                                                <!--<td><a ng-link="['BatchTaskList', {job_id: alert.job_id}]">{{alert.message}}</a></td>-->
                                                <td>
                                                    {{alert.message | limitTo: 30}}
                                                    <span ng-show="alert.message.length > 30">...</span>
                                                </td>
                                            </tr>
                                        </tbody>
                                        <tbody ng-show="!vm.loadingAlerts && vm.errors.items.length===0">
                                            <tr>
                                                <td colspan="4" class="empty-collection-info">Hooray! You don't have any errors or warnings.</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <br>
                                <!--pagination for Errors/Alerts grid-->
                                <div class="pagination pagination-mini" ng-show="!vm.loadingAlerts && vm.errors.items.length!==0">
                                    <ul>
                                        <li><span>Showing {{(vm.errors.currentPage == 1 ? vm.errors.currentPage : ((vm.errors.currentPage-1)*vm.errors.pageSize)+1)}}-{{(vm.errors.currentPage == vm.errors.noOfPages ? vm.errors.items.length : vm.errors.currentPage*vm.errors.pageSize)}} of {{vm.errors.items.length}}</span></li>
                                        <li ng-class="{disabled: vm.errors.currentPage == 1}" ng-click="vm.errors.currentPage=vm.errors.currentPage-1"><a href="">Prev</a></li>
                                        <li ng-repeat="n in vm.errors.pages track by $index" ng-click="vm.errors.currentPage = $index+1"><a  ng-class ="{current: vm.errors.currentPage == $index+1}" ng-style="{'background-color': vm.errors.currentPage == $index+1 ? '#D3D3D3' : 'white'}"href="">{{$index+1}}</a></li>
                                        <li ng-class="{disabled: vm.errors.currentPage == vm.errors.noOfPages}" ng-click="vm.errors.currentPage=vm.errors.currentPage+1"><a href="">Next</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!--Headers for Tickets grid-->
                    <div class="span-6">
                        <div class="rs-facet-section">
                            <div class="rs-facet-section-body">
                                <a href="https://mycloud.rackspace.com/cloud/{{vm.tenant_id}}/tickets"  ng-show="!vm.loadingTickets && vm.tickets.items.length>0" class="rs-btn rs-btn-link rs-pull-right" target="_blank" role="button" data-trigger="hover" data-placement="top" data-toggle="popover" data-content="Got to tickets in Rackspace Reach">See All <i class="fa fa-angle-double-right"></i></a>
                                <h3>Tickets <span class="rs-quiet">({{vm.tickets.items.length}})</span></h3>
                                <div class="migration-status-list-container table-justify">
                                    <table class="rs-list-table no-truncate-td cell-center">
                                        <thead>
                                            <tr>
                                                <th>
                                                    <a href="javascript:void(0);" class="rs-table-sort custom-sort-a" ng-click="vm.setSortBy('ticket_batch', 'ticket_id')" ng-class="{'custom-table-sort-asc current-sort-param': vm.sortBy['ticket_batch']==='ticket_id', 'custom-table-sort-desc current-sort-param': vm.sortBy['ticket_batch']==='-ticket_id', 'custom-table-sort-desc': vm.sortBy['ticket_batch'].indexOf('ticket_id') < 0}">
                                                        <span class="rs-table-sort-text">Ticket Number</span>
                                                        <span class="rs-table-sort-indicator"></span>
                                                    </a>
                                                </th>
                                                <th>
                                                    <a href="javascript:void(0);" class="rs-table-sort custom-sort-a" ng-click="vm.setSortBy('ticket_batch', 'created')" ng-class="{'custom-table-sort-asc current-sort-param': vm.sortBy['ticket_batch']==='created', 'custom-table-sort-desc current-sort-param': vm.sortBy['ticket_batch']==='-created', 'custom-table-sort-desc': vm.sortBy['ticket_batch'].indexOf('created') < 0}">
                                                        <span class="rs-table-sort-text">Date/Time</span>
                                                        <span class="rs-table-sort-indicator"></span>
                                                    </a>
                                                </th>
                                                <th>Message</th>
                                            </tr>
                                        </thead>
                                        <!--data display for Tickets grid-->
                                        <tbody ng-show="!vm.loadingTickets && vm.tickets.items.length>0">
                                            <tr ng-repeat="ticket in vm.tickets.items | orderBy: vm.sortBy.ticket_batch | limitTo : vm.tickets.pageSize : (vm.tickets.currentPage-1)*vm.tickets.pageSize">
                                                <td><a href="https://mycloud.rackspace.com/cloud/{{vm.tenant_id}}/tickets#{{ticket.ticket_id}}">{{ticket.ticket_id}}</a></td>
                                                <td class="rs-table-text ng-binding">{{ticket.created | date : 'M/dd/yyyy hh:mm a'}}</td>
                                                <td>
                                                    {{ticket.description | limitTo: 30}}
                                                    <span ng-show="ticket.description.length > 30">...</span>
                                                </td>
                                            </tr>
                                        </tbody>
                                        <tbody ng-show="!vm.loadingTickets && vm.tickets.items.length===0">
                                            <tr>
                                                <td colspan="3" class="empty-collection-info">You don't have any tickets.</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <!--pagination for Tickets grid-->
                                <br>
                                <div class="pagination pagination-mini" ng-show="!vm.loadingTickets && vm.tickets.items.length!==0">
                                    <ul>
                                        <li><span>Showing {{(vm.tickets.currentPage == 1 ? vm.tickets.currentPage : ((vm.tickets.currentPage-1)*vm.tickets.pageSize)+1)}}-{{(vm.tickets.currentPage == vm.tickets.noOfPages ? vm.tickets.items.length : vm.tickets.currentPage*vm.tickets.pageSize)}} of {{vm.tickets.items.length}}</span></li>
                                        <li ng-class="{disabled: vm.tickets.currentPage == 1}" ng-click="vm.tickets.currentPage=vm.tickets.currentPage-1"><a href="">Prev</a></li>
                                        <li ng-repeat="n in vm.tickets.pages track by $index" ng-click="vm.tickets.currentPage = $index+1"><a href="">{{$index+1}}</a></li>
                                        <li ng-class="{disabled: vm.tickets.currentPage == vm.tickets.noOfPages}" ng-click="vm.tickets.currentPage=vm.tickets.currentPage+1"><a href="">Next</a></li>
                                    </ul>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="abort_continue" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="ModalForNoSelect" aria-hidden="true">
    <div class="modal-body" style="height: 150px">
        <h3 style="margin-top: 40px; text-align: center">Migration for one or more resources in this batch has already been scheduled in another batch. Cannot continue.</h3>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
    </div>
</div>

<div id="browser_back" class="modal modal-warning hide animated fadeIn" tabindex="-1" role="dialog" aria-labelledby="ModalForNoSelect" aria-hidden="true">
     <div class="modal-header">
         <h3><i class="fa fa-warning"></i> Migration Already Scheduled </h3>
     </div>
     <div class="modal-body">
        <p><big>Your migration has already been scheduled and submitted. Would you like to schedule a new migration ?</big></p>
      </div>
      <div class="modal-footer">
          <button ng-click="vm.startNewMigration()" type="button" class="rs-btn" data-dismiss="modal">Yes</button>
          <button type="button" class="rs-btn" data-dismiss="modal">No</button>
      </div>
</div>

<div id="aws_check" class="modal modal-warning hide animated fadeIn" tabindex="-1" role="dialog" aria-labelledby="ModalForNoSelect" aria-hidden="true">
     <div class="modal-header">
         <h3><i class="fa fa-warning"></i> Cannot continue </h3>
     </div>
     <div class="modal-body">
        <p><big>Looks like the destination AWS account you selected for this migration is no longer available. We cannot continue scheduling this migration. Click on 'New Migration' button to schedule a new migration.</big></p>
      </div>
      <div class="modal-footer">
          <button ng-click="vm.startNewMigration()" type="button" class="rs-btn" data-dismiss="modal">New Migration</button>
          <button type="button" class="rs-btn" data-dismiss="modal">Cancel</button>
      </div>
</div>

<div id="error_modal" class="modal modal-warning hide animated fadeIn" tabindex="-1" role="dialog" aria-labelledby="ModalForNoSelect" aria-hidden="true">
     <div class="modal-header">
         <h3><i class="fa fa-warning"></i> Uh oh! That didn't work </h3>
     </div>
     <div class="modal-body">
        <p><big>{{vm.message}}</big></p>
      </div>
      <div class="modal-footer">
          <button type="button" class="rs-btn" data-dismiss="modal">Close</button>
      </div>
</div>

<script type="text/javascript">
    $(document).ready(function() {
        var index,elements = $('li[class*=" racker-nav-item active"]');
        if(elements.length != 0){
            for(index =0;index<elements.length;index++){
                var id = elements[index].id;
                document.getElementById(id).className -= " racker-nav-item active";
            }
        }
        if(document.getElementById("racker-migration-mgr")){
            document.getElementById("racker-migration-mgr").style.visibility = "visible";
            document.getElementById("racker-migration-mgr").className += " racker-nav-item active";
        }
    });
</script>
